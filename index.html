<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ALCO Timesheet Portal</title>
  <style>
    /* Modern CSS Variables */
    :root {
      --primary-blue: #2563eb;
      --primary-blue-hover: #1d4ed8;
      --primary-blue-light: #3b82f6;
      --secondary-blue: #1e40af;
      --background-light: #f8fafc;
      --background-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --text-primary: #1e293b;
      --text-secondary: #475569;
      --border-color: #e2e8f0;
      --border-hover: #cbd5e1;
      --border-blue: #bfdbfe;
      --border-blue-light: #dbeafe;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --radius-sm: 6px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --radius-xl: 16px;
      --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Basic resets */
    * {
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: var(--background-light); 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
      color: var(--text-primary);
      display: flex;
      flex-direction: column;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    header, footer {
      background: #fff;
      padding: 1.5rem 1rem;
      text-align: center;
      border-bottom: 1px solid var(--border-color);
      box-shadow: var(--shadow-sm);
    }
    header {
      background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
      color: #fff;
      border-bottom: none;
    }
    header h1 {
      color: #fff;
      margin: 0;
      font-weight: 600;
      letter-spacing: -0.025em;
    }
    footer {
      border-top: 1px solid var(--border-color);
      border-bottom: none;
      margin-top: auto;
      color: var(--text-secondary);
      font-size: 0.875rem;
    }
    .page-content {
      flex: 1 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 2rem;
      width: 100%; 
    }
    .container {
      width: 95%;
      max-width: 1500px;
      background: #fff;
      margin: 2rem auto;
      padding: 2.5rem;
      border-radius: var(--radius-lg); 
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.04);
      border: 2px solid var(--border-blue-light);
      transition: var(--transition);
    }
    .container:hover {
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12), 0 4px 8px rgba(0, 0, 0, 0.06);
      border-color: var(--border-blue);
    }

    /* Headings */
    h1, h2, h3, h4 {
      margin-top: 0;
      color: var(--text-primary);
      font-weight: 600;
      letter-spacing: -0.02em;
    }
    h1 {
      font-size: 2rem;
      font-weight: 700;
    }
    h2 {
      font-size: 1.75rem;
      margin-bottom: 1.5rem;
    }
    h3 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

    /* Modern button style */
    button {
      background: var(--primary-blue);
      color: #fff;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: var(--radius-md);
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      transition: var(--transition);
      box-shadow: var(--shadow-sm);
      position: relative;
      overflow: hidden;
    }
    button:hover {
      background: var(--primary-blue-hover);
      box-shadow: var(--shadow-md);
      transform: translateY(-1px);
    }
    button:active {
      transform: translateY(0);
      box-shadow: var(--shadow-sm);
    }
    button:focus {
      outline: 2px solid var(--primary-blue-light);
      outline-offset: 2px;
    }

    /* Modern inputs and selects */
    input, select {
      border-radius: var(--radius-md);
      border: 1px solid var(--border-color);
      padding: 0.625rem 0.875rem;
      font-size: 1rem;
      transition: var(--transition);
      background: #fff;
      color: var(--text-primary);
    }
    input:focus, select:focus {
      outline: none;
      border-color: var(--primary-blue);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    input:hover, select:hover {
      border-color: var(--border-hover);
    }

    /* "View"/"Approve"/"Delete" etc. in a row */
    .inline-button-group {
      display: flex;
      justify-content: center;
      gap: 0.75rem;
      margin-top: 0.6rem; 
      margin-bottom: 0.6rem;
    }

    /* The 4 main user timesheet-creation buttons in a vertical stack, centered */
    .vertical-button-stack {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
      margin-top: 1.5rem;
    }
    .vertical-button-stack button {
      min-width: 200px;
    }

    /* Link styles */
    .link {
      color: var(--primary-blue);
      text-decoration: none;
      cursor: pointer;
      display: inline-block;
      margin-top: 1rem;
      font-weight: 500;
      transition: var(--transition);
      border-bottom: 1px solid transparent;
    }
    .link:hover {
      color: var(--primary-blue-hover);
      border-bottom-color: var(--primary-blue-hover);
    }

    .hidden {
      display: none;
    }

    /* Table Wrappers: allow horizontal scroll if needed */
    .table-wrapper {
      width: 100%;
      overflow-x: auto;
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-sm);
    }

    /* Modern table styling */
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 1rem;
      background-color: #fff;
      border-radius: var(--radius-md);
      overflow: hidden;
    }
    thead tr {
      background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
      color: #fff;
    }
    th, td {
      border: 1px solid var(--border-color);
      padding: 1rem 0.75rem;
      text-align: center;
      vertical-align: middle;
      font-size: 0.9rem;
      white-space: nowrap; 
    }
    th {
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.8rem;
      letter-spacing: 0.05em;
    }
    tbody tr {
      transition: var(--transition);
    }
    tbody tr:hover {
      background-color: #f8fafc;
    }
    tbody tr:nth-child(even) {
      background-color: #fafbfc;
    }
    tbody tr:nth-child(even):hover {
      background-color: #f1f5f9;
    }

    .admin-button {
      display: block;
      margin-top: 1rem;
      text-decoration: none;
      cursor: pointer;
      font-size: 0.9rem;
      text-align: center;
      color: var(--text-secondary);
      font-weight: 500;
      transition: var(--transition);
    }
    .admin-button:hover {
      color: var(--primary-blue);
    }

    /* Timesheet item styling */
    .timesheet-item {
      background: #ffffff;
      border: 2px solid var(--border-blue-light);
      border-radius: var(--radius-md);
      margin-bottom: 1.5rem;
      padding: 1.5rem;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
      transition: var(--transition);
    }
    .timesheet-item:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1);
      border-color: var(--border-blue);
      transform: translateY(-2px);
    }
    .timesheet-item-header {
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--text-primary);
    }
    .timesheet-details {
      margin: 1rem 0;
    }
    .timesheet-details.hidden {
      display: none;
    }

    /* Center logout + gear side by side */
    .logout-btn-container {
      text-align: center;
      margin-top: 1.5rem;
      display: flex;
      flex-direction: row; 
      align-items: center;
      justify-content: center;
      gap: 1rem;
    }

    /* Timesheet creation container */
    .timesheet-entry-container {
      border: 2px solid var(--border-blue-light);
      border-radius: var(--radius-lg);
      margin-top: 1rem;
      padding: 2rem;
      background: #fff;
      width: 100%;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
    }

    /* Modern auth forms */
    .auth-form-container {
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
      max-width: 320px;
      margin: 0 auto;
    }
    .auth-form-container input {
      width: 100%;
      padding: 0.75rem 1rem;
      margin: 0; 
      border: 1.5px solid var(--border-color);
      box-sizing: border-box;
      font-size: 1rem;
    }
    .auth-form-container button {
      width: 100%;
      margin-top: 0.5rem;
    }

    /* Extra spacing above the Create button */
    #create-new-timesheet-container {
      margin-top: 1.5rem;
    }

    /* "Pay Period Start Date" label bigger */
    .start-date-container {
      margin-top: 1rem;
      display: inline-flex;
      align-items: center;
      gap: 0.75rem; 
      font-size: 1.2rem;
    }
    .start-date-container label {
      font-weight: 600;
      color: var(--text-primary);
    }
    .start-date-container input {
      padding: 0.75rem 1rem;
      font-size: 1rem;
    }

    /* Bolder employee name in admin table */
    #admin-users-table tbody td:first-child {
      font-weight: 600; 
      color: var(--text-primary);
    }

    /* Approved Timesheets */
    #admin-approved-wrapper {
      margin-top: 2rem; 
    }

    /* Make " "/"NaN" invisible if needed */
    .invisible-value {
      color: transparent;       
      display: inline-block;
      width: 100%;
      min-height: 1em;          
      white-space: pre;         
    }

    /* EASY FILL SETTINGS container */
    #easyfill-settings-container {
      display: none; 
    }
    #easyfill-settings-table {
      width: 100%;
      margin-top: 1rem;
      border-collapse: collapse;
    }
    #easyfill-settings-table th, #easyfill-settings-table td {
      border: 1px solid var(--border-color);
      padding: 0.75rem 0.5rem;
      text-align: center;
      vertical-align: middle;
    }
    .easyfill-time-cell {
      min-width: 80px;
    }
    #timesheet-entry-container select[name="jobDescription"],
    #timesheet-entry-container input[name="comment"] {
      max-width: 120px;
    }

    /* Add text-wrapping + 20px corner radius for "View" tables in Past Timesheets */
    .timesheet-details .table-wrapper table {
      border-radius: var(--radius-xl); 
      overflow: hidden;
    }
    .timesheet-details .table-wrapper th, 
    .timesheet-details .table-wrapper td {
      white-space: normal;
      word-wrap: break-word;
    }
    .timesheet-details.admin-view .table-wrapper table {
      border-radius: var(--radius-xl);
      overflow: hidden;
    }
    .timesheet-details.admin-view .table-wrapper th,
    .timesheet-details.admin-view .table-wrapper td {
      white-space: normal;
      word-wrap: break-word;
    }

    /* Custom Jobs Section */
    #custom-jobs-container {
      margin-top: 2rem;
      border-top: 1px solid var(--border-color);
      padding-top: 1.5rem;
      text-align: center;
    }
    /* Wrap the input + button so the list is definitely below them */
    #custom-jobs-container > div.custom-jobs-input-container {
      margin-bottom: 1rem;
    }
    #custom-job-input {
      width: 300px;
      padding: 0.75rem 1rem;
      font-size: 1rem;
      margin-right: 0.5rem;
      border: 1.5px solid var(--border-color);
    }
    #custom-jobs-list {
      margin-top: 1rem;
      list-style-type: none;
      padding: 0;
      display: inline-block;
      text-align: left;
    }
    #custom-jobs-list li {
      margin: 0.5rem 0;
      padding: 0.75rem 1rem;
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #fff;
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
    }
    #custom-jobs-list li:hover {
      box-shadow: var(--shadow-md);
      border-color: var(--border-hover);
    }
    #custom-jobs-list li span.job-text {
      cursor: pointer;
      font-weight: 500;
    }
    #custom-jobs-list li button.delete-job {
      background: #ef4444;
      border: none;
      color: #fff;
      margin-left: 50px;
      padding: 0.375rem 0.75rem;
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-weight: 500;
      transition: var(--transition);
    }
    #custom-jobs-list li button.delete-job:hover {
      background: #dc2626;
      box-shadow: var(--shadow-sm);
    }

    /* On Call Hours specific styling */
    th[data-label="On Call Hours"], td[data-label="On Call Hours"], th.on-call-hours, td.on-call-hours {
      min-width: 220px !important;
      width: 220px !important;
      max-width: 240px;
      white-space: nowrap;
    }
    /* Force On Call Hours column to be wide and text to stay on one line */
    th:nth-child(6), td:nth-child(6) {
      min-width: 200px !important;
      width: 200px !important;
      max-width: 250px;
      white-space: nowrap !important;
    }

    th.on-call-header {
      text-align: center !important;
      vertical-align: middle;
      white-space: normal;
    }
























     /* MOBILE TWEAKS */
     @media (max-width: 700px) {
      table thead {
        display: none;
      }
      table, table tbody, table tr, table td {
        display: block;
        width: 100%;
      }
      table tr {
        margin-bottom: 1rem;
        border-bottom: 1px solid #ccc;
      }
      table td {
        position: relative;
        padding-left: 45%; 
        text-align: center;
        border: none;
        border-bottom: 1px solid #eee;
      }
      table td:before {
        content: attr(data-label) " ";
        position: absolute;
        width: 40%; 
        left: -0.9rem;
        font-weight: bold;
        color: #000;
      }
      .spacer-row td {
        border: none;
        background: none;
        height: 8px;
      }
      table td {
        padding: 0.4rem;
        font-size: 0.85rem;
      }
      input[type="time"],
      select[name="jobDescription"] {
        width: 60%;
      }
      .container {
        margin: 1rem 0.5rem;
        padding: 1rem;
        max-width: 100%;
      }
      body {
        font-size: 0.95rem;
      }
      th, td {
        font-size: 0.85rem;
        padding: 0.5rem;
      }
      /* centre “Add On Call” no matter what */
      .add-on-call-btn{
        display:block;
        margin:0.5rem auto;
        margin-left: 67px;
        
        width:auto;
      }

      .add-on-call-btn.is-cancel {
        margin-left: 115px;
      }

      .on-call-inputs-mobile {
        margin-left: 110px;
      }

      .on-call-session-list > div {
        margin-left: 110px;
      }

      /* Hide "On Call Hours" text in mobile mode */
      table td[data-label="On Call Hours"]:before {
        display: none;
      }





    }




  </style>
</head>
<body>
  <header><br>
    <h1>ALCO Timesheet Portal</h1>
  </header>

  <div class="page-content">

    <!-- AUTH container -->
    <div class="container" id="auth-container">
      <!-- User Login -->
      <div id="user-auth-section">
        <h2 style="text-align:center;">User Login</h2>
        <div class="auth-form-container">
          <input type="email" id="login-email" placeholder="Email">
          <input type="password" id="login-password" placeholder="Password">
          <button id="login-btn">Login</button>
        </div>
        <div style="text-align:center;">
          <span class="link" id="go-to-signup">Don't have an account? Sign Up</span><br/>
          <span class="link" id="forgot-password-link">Forgot Password?</span>
        </div>
      </div>

      <!-- User Sign Up -->
      <div id="user-signup-section" class="hidden">
        <h2 style="text-align:center;">User Sign Up</h2>
        <div class="auth-form-container">
          <input type="text" id="signup-firstname" placeholder="First Name">
          <input type="text" id="signup-lastname" placeholder="Last Name">
          <input type="email" id="signup-email" placeholder="Email">
          <input type="password" id="signup-password" placeholder="Password">
          <button id="signup-btn">Sign Up</button>
        </div>
        <div style="text-align:center;">
          <span class="link" id="go-to-login">Already have an account? Login</span>
        </div>
      </div>

      <!-- Admin Login -->
      <div id="admin-login-section" class="hidden">
        <h2 style="text-align:center;">Admin Login</h2>
        <div class="auth-form-container">
          <input type="password" id="admin-password" placeholder="Admin Password">
          <button id="admin-login-btn">Login as Admin</button>
        </div>
        <div style="text-align:center;">
          <span class="link" id="go-to-user-login">Go to User Login</span>
        </div>
      </div>

      <span class="admin-button" id="admin-access-link">Admin Login</span>
    </div>
    
    <!-- USER DASHBOARD -->
    <div class="container hidden" id="user-dashboard">
      <h2 style="text-align:center;">Welcome, <span id="user-name-display"></span></h2>
      <h3></h3>
      <div class="timesheet-item" id="create-new-timesheet-container">
        <button id="create-new-timesheet-btn">Create New Timesheet</button>
      </div>
      <div id="timesheet-start-section" class="hidden" style="text-align:center;">
        <div class="start-date-container">
          <label for="timesheet-start">Pay Period Start Date:</label>
          <input type="date" id="timesheet-start" placeholder="mm/dd/yyyy" />
        </div>
      </div>
      <div class="timesheet-entry-container hidden" id="timesheet-entry-container">
        <div class="table-wrapper">
          <div id="timesheet-form"></div>
        </div>
        <div class="vertical-button-stack">
          <button id="easy-fill-btn">Easy Fill</button>
          <button id="export-timesheet-btn">Export PDF</button>
          <button id="submit-timesheet-btn">Submit Timesheet</button>
          <button id="cancel-timesheet-btn">Cancel</button>
        </div>
      </div>
      
      <h3>Past Timesheets</h3>
      <div id="past-timesheets"></div>
      <div class="logout-btn-container">
        <button id="gear-button">⚙</button>
        <button id="logout-btn">Logout</button>
      </div>
    </div>

    <!-- ADMIN DASHBOARD -->
    <div class="container hidden" id="admin-dashboard">
      <h2 style="text-align:center;">Admin Dashboard</h2>
      <h3>Timesheets Pending Approval</h3>
      <div class="container hidden" id="admin-pending-view-container"></div>
      <div class="table-wrapper" id="admin-users-wrapper">
        <!-- Pending table inserted dynamically -->
      </div>
      <br><br><br>
      <h3>Approved Timesheets</h3>
      <div class="table-wrapper" id="admin-approved-wrapper">
        <!-- Approved table inserted dynamically -->
      </div>
      <div class="container hidden" id="admin-approved-view-container"></div>
      <div class="logout-btn-container">
        <button id="admin-logout-btn">Logout</button>
      </div>
    </div>

    <!-- EASY FILL SETTINGS PAGE (only for user) -->
    <div class="container" id="easyfill-settings-container">
      <h2 style="text-align:center;">Easy Fill Settings</h2>
      <p style="text-align:center;">
        Below are your default start/end times, job, and comment for each day.
        When you click <strong>Easy Fill</strong> on a new timesheet, 
        these will be automatically inserted.
      </p>
      <div class="table-wrapper">
        <table id="easyfill-settings-table">
          <thead>
            <tr>
              <th>Day</th>
              <th>Start 1</th>
              <th>End 1</th>
              <th>Start 2</th>
              <th>End 2</th>
              <th>Job</th>
              <th>Comment</th>
            </tr>
          </thead>
          <tbody id="easyfill-settings-tbody">
            <!-- Populated dynamically -->
          </tbody>
        </table>
      </div><br>
      <center><button id="easyfill-edit-btn">Edit Easy Fill</button>
      
      
      <br><br>
      <div class="auth-form-container" >
    <center><h3>Work Schedule</h3>
    <select id="work-schedule">
      <option value="biweekly">Bi-weekly</option>
      <option value="weekly">Weekly</option>
    </select><br><br>
      
      

  </div>
      
      
      <!-- Custom Jobs area -->
      <div id="custom-jobs-container" style="display: none;">
        <h3>Add Custom Job Descriptions</h3>

        <!-- This container ensures the UL appears below the input/button -->
        <div class="custom-jobs-input-container">
          <input type="text" id="custom-job-input" placeholder="Enter a new job name">
          <button id="add-custom-job-btn">Add Job</button>
        </div>

        <ul id="custom-jobs-list"></ul>
      </div>
      
      
    
  


      
      
      <div class="inline-button-group" style="margin-top:1rem;">
        
        <button id="easyfill-back-btn">Back</button>
      </div>
    </div>

  </div>

  <footer>
    <p>&copy; 2024 ALCO Timesheet</p>
  </footer>
  <!-- EmailJS SDK for client-side email notifications -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  emailjs.init("NawKOhIrdF9ajnZyt");
</script>
  <script type="module" src="script.js"></script>

</body>
</html>
